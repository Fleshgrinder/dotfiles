#!/usr/bin/env bash
set -Eeuo pipefail

usage() {
    cat <<USAGE
Set upstream of current branch.

Usage:
  git-set-upstream <branch> [<remote>]
  git-set-upstream (-h | --help)

Arguments:
  branch  to set the upstream for
  remote  to set the upstream for
USAGE
}

if (($# < 1)); then
    usage
    exit 64
fi

for arg in "$@"; do
    if [[ "$arg" == -h || "$arg" == --help ]]; then
        usage
        exit 0
    fi
done

branch=$1
remote=${2:-origin}

exec git --set-upstream-to="$remote"/"$branch"
